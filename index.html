<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="./favicon.png">

  <title>Loading the map...</title>

  <!-- jQuery-->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

  <!-- Leaflet (CSS and JS) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
  crossorigin=""></script>

  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/js/fontawesome.min.js"></script>

  <!-- leaflet-providers-->
  <script src="https://unpkg.com/leaflet-providers@1.10.2/leaflet-providers.js"></script>

  <!-- Leaflet.awesome-markers v2.0.4, manually updated to svg to allow hex and material icons -->
  <link rel="stylesheet" type="text/css" href="scripts/Leaflet.awesome-markers/dist/leaflet.awesome-markers.css">
  <script type="text/javascript" src="scripts/Leaflet.awesome-markers/dist/leaflet.awesome-markers.js"></script>

  <!-- Leaflet Markercluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
  <script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

  <!-- Leaflet Markercluster layer support -->
  <script src="https://unpkg.com/leaflet.markercluster.layersupport@2.0.1/dist/leaflet.markercluster.layersupport.js"></script>

  <!-- Leaflet control geocoder -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.css" />
  <script src="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.js"></script>

  <!-- Locate Control -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.72.0/L.Control.Locate.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.72.0/L.Control.Locate.min.js"></script>

  <!-- jQuery-CSV -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>

  <!-- Custom style sheet -->
  <link rel="stylesheet" type="text/css" href="style.css">

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body id= "stop-scrolling"> 
  <div class="preloader"></div>     
<div class="nav-right visible-xs">
    <div class="button" id="btn">
      <div class="bar top"></div>
      <div class="bar middle"></div>
      <div class="bar bottom"></div>
    </div>
  </div>

  <div class="sr-sharebar sr-sb-vl sr-sb-left">
    <div class="socializer" data-features="32px,squircle,opacity,vertical,icon-white,pad" data-sites="facebook,youtube,twitter,print" data-meta-link="http://map.safeinnm.com/" data-meta-title="Our Impact Map">
  </div>
  </div>
  <a href= "https://datastudio.google.com/reporting/2eb8d323-89df-4b88-bc47-af63b3128551" target="_blank">
      <img src = "https://github.com/charlaburnett/map.safeinmi/blob/e8bea58ea273c35875b46375f683350a39d58d60/markers/OUR%20IMPACT%20LOGOS%20(1).png?raw=true" class="logo"> 
        </a> 
<main>
  <div id="map" >
  <div class="button" id="btn">
  <nav>
    <div class="nav-right hidden-xs">
      
        <div class="bar top">
        </div>
        <div class="bar middle"></div>
        <div class="bar bottom"></div>
      </div>
    </div>
  </div>
  </nav>
</div>
</main>

<div class="sidebar">
  <div id="panel">
      
      <div id="gform" >
          <iframe id="form" src="https://docs.google.com/forms/d/e/1FAIpQLSfsMpCCVeYDYQqPNWCaFOEGq0kX1jhgD_b-Qqd8poBO-DlGrQ/viewform?embedded=true" width="100%" height="100%" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>
      </div> 
    </div>       
</div>
<table id="maptable" class="display"></table>

</body>

<script type ="text/javascript">
  $(document).ready(function() {
  
      function toggleSidebar() {
        $(".button").toggleClass("active");
        $("main").toggleClass("move-to-left");
        $(".sidebar-item").toggleClass("active");
      }
    
      $(".button").on("click tap", function() {
        toggleSidebar();
      });
    
      $(document).keyup(function(e) {
        if (e.keyCode === 27) {
          toggleSidebar();
        }
      });
    
    });
  
  </script>

  <script type="text/javascript">
    var map = L.map('map', {
      attributionControl: false,
      zoomControl: false,
      scrollWheelZoom: false,
      tap: false
    }).setView([41.76,-72.69], 11); // default center is overridden by Google Sheet options and points
  </script>

<script> 
  function preloaderFadeOutInit(){
  $('.preloader').fadeOut('slow');
  $('body').attr('id','');
  }
  // Window load function
  jQuery(window).on('load', function () {
  (function ($) {
  preloaderFadeOutInit();
  })(jQuery);
  
  setTimeout(function(){        
    $('#preloader').fadeOut();
    $('.preloader_img').delay().fadeOut('slow'); 
  }, 100000000000);
  
  });
  </script>

  <script type="text/javascript" src="./google-doc-url.js"></script>
  <script type="text/javascript" src="./scripts/constants.js"></script>
  <script type="text/javascript" src="./scripts/palette.js"></script>
  <script type="text/javascript" src="./scripts/polylabel.js"></script>
  <script type="text/javascript" src="./scripts/map.js"></script>

</body>
</html>
